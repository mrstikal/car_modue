!function(){"use strict";function e(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const t={_storage:new WeakMap,put:function(e,t,o){this._storage.has(e)||this._storage.set(e,new Map),this._storage.get(e).set(t,o)},get:function(e,t){return this._storage.get(e).get(t)},has:function(e,t){return this._storage.has(e)&&this._storage.get(e).has(t)},remove:function(e,t){var o=this._storage.get(e).delete(t);return 0===!this._storage.get(e).size&&this._storage.delete(e),o}},o=function(e,t,o,n){let r;r="object"==typeof e?[document]:Array.from(document.querySelectorAll(e));let a=t.split(" ");if("function"==typeof o){let e=o;r.forEach((function(t){a.forEach((function(o){t.addEventListener(o,(function(o){e(t,o)}))}))}))}else r.forEach((function(e){a.forEach((function(t){e.addEventListener(t,(function(e){e.target.matches(o)&&n(e.target,e)}))}))}))};class n{constructor(){e(this,"mandatories",[]),e(this,"optionals",[]),e(this,"throwErrors",!0)}process(){let e=!1,o="",n=[],a=this.mandatories,c=this.optionals,s=this.throwErrors;if(a.length&&(n=Array.from(document.querySelectorAll(a)),n.forEach((function(t,n){if(t){let n=t.value;null==n&&(n=""),""==n.trim()&&(t.closest(".js_parent").querySelector(".this_element_name").classList.add("red_error"),t.classList.add("red_error"),e=!0,o+='<p>Je t≈ôeba vyplnit "'+t.closest(".js_parent").querySelector(".this_element_name").textContent+'"</p>')}})),e)){if(s){let e=document.querySelector(".general_error");e.querySelector(".error_is").innerHTML=o,e.style.display="block",TweenMax.to([document.documentElement,document.body],1,{scrollTop:r(document.querySelector(".red_error")).top})}return!1}c.length&&(n=n.concat(Array.from(document.querySelectorAll(c))));let i=new FormData;return n.forEach((function(e,o){if(e){let o=e.id,n=0;if(t.has(e,"Datepick")){let o=new Date(t.get(e,"Datepick").getDate("mm/dd/yyyy"));e.classList.contains("from")?(o.setHours(0,0,0,0),n=Math.ceil(o.getTime()/1e3)):e.classList.contains("to")?(o.setHours(23,59,59,999),n=Math.floor(o.getTime()/1e3)):(o.setHours(0,0,0,0),n=Math.ceil(o.getTime()/1e3))}else n=e.matches('[type="checkbox"]')?Number(e.checked):e.value.trim();i.append(o,n)}})),i}}const r=function(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}};class a extends Date{constructor(e){super(e),this.inputDate=e}addDays(e){var t=new Date(this.inputDate);return t.setDate(t.getDate()+e),t}}document.addEventListener("DOMContentLoaded",(function(e){function r(){!function(e,t="block"){Array.from(document.querySelectorAll(e)).forEach((function(e){e.style.display=t}))}(".load_overlay");let e=new n;e.optionals=["#date_from","#date_to"];let t=e.process();fetch(load_ajax_url,{method:"POST",body:t,cache:"no-cache"}).then((e=>{if(!e.ok)throw new Error("Network response error");return e.json()})).then((e=>{document.querySelector(".cashbook_table tbody").innerHTML=e.tableRows,document.querySelector(".invoices_found span").textContent=e.count,document.querySelector(".total_sum span").textContent=e.totalSum,Array.from(document.querySelectorAll(".load_overlay")).forEach((function(e){e.style.display="none"}))})).catch((function(e){console.log(e)}))}Array.from(document.querySelectorAll(".datetime_picker")).forEach((e=>{let o=new Datepick(e,{language:"cs",autohide:!0});t.put(e,"Datepick",o)})),t.get(document.querySelector("#date_from"),"Datepick").setDate(new Date(1e3*defaultStart)),t.get(document.querySelector("#date_to"),"Datepick").setDate(new Date(1e3*defaultEnd)),o("#date_from","changeDate",(function(e){t.get(document.querySelector("#date_to"),"Datepick").setOptions({minDate:new a(t.get(document.querySelector("#date_from"),"Datepick").getDate("mm/dd/yyyy"))});var o=new Event("input",{bubbles:!0,defaultPrevented:!0});e.dispatchEvent(o)})),o("#date_to","changeDate",(function(e){t.get(document.querySelector("#date_from"),"Datepick").setOptions({maxDate:new a(t.get(document.querySelector("#date_to"),"Datepick").getDate("mm/dd/yyyy"))});var o=new Event("input",{bubbles:!0,defaultPrevented:!0});e.dispatchEvent(o)})),r(),o(".pickers_run","click",r)}))}();